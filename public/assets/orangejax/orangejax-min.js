document.addEventListener("DOMContentLoaded",function(){jQuery("body").on("click",".js-submit",function(a){a.preventDefault(),orangeJax.before($(this),jQuery(this).closest("form"))})});var orangeJax={before:function(a,r){var e={};e.element=a,e.closestForm=r,e.fields=r.serializeArray(),e.attribute={},jQuery.each(r[0].attributes,function(a,r){e.attribute[r.name]=r.value}),orangeJax.confirm(e)},ajaxSubmit:function(a){orangeJax.form=a,orangeJax.primaryFieldName=null==orangeJax.form.attribute["data-primaryfieldname"]?"id":orangeJax.form.attribute["data-primaryfieldname"];var r=orangeJax.BuildURI();jQuery.ajax({method:a.attribute.method,url:r,dataType:"json",data:a.fields,cache:!1,timeout:5e3,async:!0,success:orangeJax.processResponds,error:orangeJax.ajaxError})},ajaxError:function(){notify.addError("Processing Error.")},processResponds:function(a,r,e){if(notify.removeAll(),1==a.success)var t=null==orangeJax.form.attribute["data-success"]?"showSuccess":orangeJax.form.attribute["data-success"];else var t=null==orangeJax.form.attribute["data-failure"]?"showError":orangeJax.form.attribute["data-failure"];orangeJax[t](a)},showError:function(a){for(var r in a.errors)notify.addError(a.errors[r][0]);var e=null==orangeJax.form.attribute["data-after"]?"after":orangeJax.form.attribute["data-after"];orangeJax[e](a)},showSuccess:function(a){orangeJax.swapPostPatch(a),orangeJax.insertId(orangeJax.primaryFieldName,a.input[orangeJax.primaryFieldName]);var r=orangeJax.form.attribute["data-redirect"],e=orangeJax.form.attribute["data-successmsg"];e&&"false"!=e&&(e="true"==e?"Record Saved":e,r?notify.save(notify.buildMsg(e,"success")):notify.addSuccess(e));var t=null==orangeJax.form.attribute["data-after"]?"after":orangeJax.form.attribute["data-after"];if(orangeJax[t](a),r)switch(r){case"@action":window.location.href=orangeJax.form.attribute.action;break;case"@back":window.history.back();break;default:window.location.href=r}},after:function(a){},destroy:function(a){orangeJax.form.element.closest("tr").fadeOut(400,function(){orangeJax.form.element.remove()})},confirm:function(r){var a=r.attribute["data-confirm"];null==a||"false"==a?orangeJax.ajaxSubmit(r):(a="true"==a?"Are You Sure?":a,bootbox.confirm(a,function(a){a&&orangeJax.ajaxSubmit(r)}))},swapPostPatch:function(a){orangeJax.form.closestForm.attr("method","PATCH")},insertId:function(a,r){jQuery('input[name="'+a+'"]').val(r)},BuildURI:function(a){var r=orangeJax.form.attribute.action;return"PATCH"==orangeJax.form.attribute.method&&(r+="/"+jQuery('input[name="'+orangeJax.primaryFieldName+'"]').val()),r}};
//# sourceMappingURL=orangejax-min.js.map